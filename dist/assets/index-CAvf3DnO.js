const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-RC0Rtwxe.js","assets/useTabHook-ByDSDeZM.js","assets/vendor-DdfOtQPp.js","assets/elementPlus-BgnIxcv9.js","assets/Home-N7fGnosF.css","assets/About-C8HOT4hH.js","assets/About-DAR2n2_1.css","assets/Contact-Bt2Ysh0J.js","assets/Contact-DEZm4O1C.css","assets/Profile-ChL2DmL6.js","assets/Profile-B6y3pGsd.css"])))=>i.map(i=>d[i]);
import{B as E,E as C,C as l,M as p,D as h,ak as y,z as b,aw as D,ax as L,ay as S,at as R,az as O}from"./vendor-DdfOtQPp.js";import{i as x}from"./elementPlus-BgnIxcv9.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function o(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(t){if(t.ep)return;t.ep=!0;const r=o(t);fetch(t.href,r)}})();const $=(e,a)=>{const o=e.__vccOpts||e;for(const[n,t]of a)o[n]=t;return o},q={id:"micro-app"},N={__name:"App",setup(e){return(a,o)=>{const n=y("router-link"),t=y("router-view");return b(),E("div",q,[C("nav",null,[l(n,{to:"/"},{default:h(()=>[...o[0]||(o[0]=[p("首页",-1)])]),_:1}),o[4]||(o[4]=p(" | ",-1)),l(n,{to:"/about"},{default:h(()=>[...o[1]||(o[1]=[p("关于",-1)])]),_:1}),o[5]||(o[5]=p(" | ",-1)),l(n,{to:"/contact"},{default:h(()=>[...o[2]||(o[2]=[p("详情",-1)])]),_:1}),o[6]||(o[6]=p(" | ",-1)),l(n,{to:"/profile"},{default:h(()=>[...o[3]||(o[3]=[p("个人中心",-1)])]),_:1})]),l(t)])}}},j=$(N,[["__scopeId","data-v-aebf47c4"]]),T="modulepreload",V=function(e){return"/"+e},v={},f=function(a,o,n){let t=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),i=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));t=Promise.allSettled(o.map(c=>{if(c=V(c),c in v)return;v[c]=!0;const m=c.endsWith(".css"),w=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${w}`))return;const u=document.createElement("link");if(u.rel=m?"stylesheet":T,m||(u.as="script"),u.crossOrigin="",u.href=c,i&&u.setAttribute("nonce",i),document.head.appendChild(u),m)return new Promise((P,A)=>{u.addEventListener("load",P),u.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(s){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s}return t.then(s=>{for(const i of s||[])i.status==="rejected"&&r(i.reason);return a().catch(r)})},_=D({id:"micro-state",state:()=>({message:null,type:"",activeApp:"",nextPath:{path:"",query:{}},appList:[],path:0,routeChangeData:null}),getters:{getMessage(){return this.message},getType(){return this.type},getActiveApp(){return this.activeApp},getNextPath(){return this.nextPath},getAppList(){return this.appList},getPath(){return this.path},getRouteChangeData(){return this.routeChangeData}},actions:{setmicroState(e){this.message=e.message,this.type=e.type},resetmicroState(){this.message=null,this.type=""},setActiveApp(e){this.activeApp=e},setNextPath(e){this.nextPath=e},setPath(){this.path+=1},setAppList(e){this.appList.push(e)},clearApp(){this.appList=[]},setRouteChangeData(e){this.routeChangeData=e},clearRouteChangeData(){this.routeChangeData=null}}}),I=[{path:"/",name:"Home",component:()=>f(()=>import("./Home-RC0Rtwxe.js"),__vite__mapDeps([0,1,2,3,4]))},{path:"/about",name:"About",component:()=>f(()=>import("./About-C8HOT4hH.js"),__vite__mapDeps([5,1,2,3,6]))},{path:"/contact",name:"Contact",component:()=>f(()=>import("./Contact-Bt2Ysh0J.js"),__vite__mapDeps([7,1,2,3,8]))},{path:"/profile",name:"Profile",component:()=>f(()=>import("./Profile-ChL2DmL6.js"),__vite__mapDeps([9,1,2,3,10]))}],d=L({history:S("/"),routes:I});d.beforeEach((e,a,o)=>{if(e.path==="/contact"){const n=_(),t=n.getRouteChangeData;if(console.log("路由守卫拦截/contact，获取到的数据:",t),t){const r={...e.query,source:t.source,timestamp:t.timestamp,message:t.message};console.log("添加query参数后的路由:",{path:e.path,query:r}),o({path:e.path,query:r,replace:!0}),n.clearRouteChangeData();return}}o()});const g=R(j),k=O();g.use(k);g.use(x);window.$wujie?(console.log("检测到wujie环境，注册event bus监听"),window.$wujie.bus.$on("route-change",e=>{e&&(console.log("微应用通过event bus接收到路由参数:",e),_().setRouteChangeData(e.message),d.replace(e.message.microPath))}),window.$wujie.bus.$on("sendMicroMessage-micro-app",e=>{e&&e.type==="router"&&(console.log("微应用接收到统一格式的路由参数:",e),_().setRouteChangeData(e.message),e.message.microPath&&d.replace(e.message.microPath))}),window.$wujie.bus.$emit("micro-app-ready",{appName:"micro-app",timestamp:Date.now()})):console.log("未检测到wujie环境，运行在独立模式");g.use(d);g.mount("#app");export{$ as _,d as r};
